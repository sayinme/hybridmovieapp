<!DOCTYPE HTML>
<html>
  <head>
    <title>MovieSearchApp</title>
	<!-- 화면 확대비율을 기기 사이즈 가로에 맞게 조정 -->	
	<meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=no" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0b2/jquery.mobile-1.0b2.min.css" />
	<script type="text/javascript" src="http://code.jquery.com/jquery-1.6.2.min.js"></script>
	<script type="text/javascript" src="http://code.jquery.com/mobile/1.0b2/jquery.mobile-1.0b2.min.js"></script>
	<!-- <script type="text/javascript" charset="utf-8" src="phonegap-1.0.0.js"></script> -->
	<style type="text/css">
	  	h1{
	  		text-align: center;
	  		color: green;
	  	}
	  	
	 </style>
	    
	 <script> 
 	  	$(function(){
			$("#searchonline").click(function(){
		  		alert('gg');
				$("#resultlist").empty();
			  	$.ajax({
				  	type:"GET",
					url: "http://openapi.naver.com/search?key=db13514ebf38ccd279a6b93538f88bca&query=movie&target=ranktheme",
					dataType: "xml",
					success: parseXml
			  	});
		  	});
		  	
		  	$("#resultlist").ajaxError(function(event, request, settings, exception){
			  	//("resultlist").html("Error Calling: " + settings.url + "<br/>HTTP Code: " + request.status);
			  	alert('죄송합니다. 다시 시도하여 주시기 바랍니다.');
		  	});

		  	function parseXml(xml)
		  	{		  	
		  		var i = 1;
		  		var sign ;
		  		for(i=1; i<11; i++)
		  		{
	  				$(xml).find("R"+[i]).each(function()
	  				{
	  					if($(this).find("S").text() == "*")
				  		{
				  			sign = "same.png"	
				  			$("#resultlist").append("<li><img src='"+ i +".png'>" + $(this).find("K").text()+"<img src='" + sign +"'></li>");
				  		}
	  					else
	  					{
	  						if ($(this).find("S").text() == "+")
					  		{
					  			sign = "up.png"	
					  		}
					  		else if($(this).find("S").text() == "-")
					  		{
					  			sign = "down.png"
					  		}
				  			$("#resultlist").append("<li><img src='"+ i +".png'>" + $(this).find("K").text()+"<img src='" + sign +"'>" + $(this).find("V").text() +"</li>");
	  					}
	  				});	
	  			}
		  		$("#resultlist").listview('refresh');
		  	}
	  	}); 
	  	
	  </script>
	  
  </head>
  <body> <!-- onload="onLoad();" -->
  	
  	<div data-role="page" id="secondpage">
	  	
	  	<div data-role="header">
	  		<h1>Naver with Jquery</h1>
	  	</div>
	  	
	  	<div data-role="content">
			<div id="result">
				<ul data-role="listview" id="resultlist" data-inset="true" data-split-theme="a">
				</ul>
			</div>
		</div>
   		
   		<div data-role="footer" data-position="fixed">
			<div data-role="navbar">
				<ul>
		   			<li id="usersearch"><a href="index.html"  data-icon="search">Search</a></li>
		   			<li id="searchonline"><a href="#"  data-icon="star">실시간검색</a></li>
				</ul>
			</div>
		</div> 
   	</div>
   	
  </body>
</html>
